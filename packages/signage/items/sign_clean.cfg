"Replacements"
	{
	// Default to blank = nothing.
	// %SIGN_ARROW% should error if not present.
	
	"%SIGN_1_MAIN%" ""
	"%SIGN_1_EXTRA%" ""
	
	"%SIGN_2_MAIN%" ""
	"%SIGN_2_EXTRA%" ""
	
	"%SIGN_3_MAIN%" ""
	"%SIGN_3_EXTRA%" ""
	
	"%SIGN_4_MAIN%" ""
	"%SIGN_4_EXTRA%" ""
	
	"%SIGN_EXIT_MAIN%" ""
	"%SIGN_EXIT_EXTRA%" ""
	
	"%SIGN_BOX_DROPPER_MAIN%" ""
	"%SIGN_BOX_DROPPER_EXTRA%" ""
	
	"%SIGN_BALL_DROPPER_MAIN%" ""
	"%SIGN_BALL_DROPPER_EXTRA%" ""
	
	"%SIGN_LASER_CUBE_MAIN%" ""
	"%SIGN_LASER_CUBE_EXTRA%" ""
	
	"%SIGN_GOOP_MAIN%" ""
	"%SIGN_GOOP_EXTRA%" ""
	
	"%SIGN_FUNNEL_MAIN%" ""
	"%SIGN_FUNNEL_EXTRA%" ""
	
	"%SIGN_POLARITY_MAIN%" ""
	"%SIGN_POLARITY_EXTRA%" ""
	
	"%SIGN_LASER_RELAY_MAIN%" ""
	"%SIGN_LASER_RELAY_EXTRA%" ""
	
	"%SIGN_TURRET_MAIN%" ""
	"%SIGN_TURRET_EXTRA%" ""
	
	"%SIGN_BRIDGE_MAIN%" ""
	"%SIGN_BRIDGE_EXTRA%" ""

	"%SIGN_GEL_BOUNCE_MAIN%" ""
	"%SIGN_GEL_BOUNCE_EXTRA%" ""
	
	"%SIGN_GEL_SPEED_MAIN%" ""
	"%SIGN_GEL_SPEED_EXTRA%" ""
	}

"Conditions"
	{
	"Condition"
		{
		"instance" "<ITEM_BEE2_SIGNAGE>"
		// Figure out what materials to use..
		// $sign_mat1 is the material to use for the sign.
		// $sign_mat2 will be placed where the arrow is, if no arrow is required.
		"Result"
			{ // Blank them out..
			"SetInstVar" "$sign_mat1 "
			"SetInstVar" "$sign_mat2 "
			}
		"Switch"
			{
			"Flag" "instvar"
				
			"$timer_delay 3"
				{
				"SetInstVar" "$sign_mat1 %SIGN_1_MAIN%"
				"SetInstVar" "$sign_mat2 %SIGN_1_EXTRA%"
				}
			"$timer_delay 4"
				{
				"SetInstVar" "$sign_mat1 %SIGN_2_MAIN%"
				"SetInstVar" "$sign_mat2 %SIGN_2_EXTRA%"
				}
			"$timer_delay 5"
				{
				"SetInstVar" "$sign_mat1 %SIGN_3_MAIN%"
				"SetInstVar" "$sign_mat2 %SIGN_3_EXTRA%"
				}
			"$timer_delay 6"
				{
				"SetInstVar" "$sign_mat1 %SIGN_4_MAIN%"
				"SetInstVar" "$sign_mat2 %SIGN_4_EXTRA%"
				}
				
			"$timer_delay 7"
				{
				"SetInstVar" "$sign_mat1 %SIGN_EXIT_MAIN%"
				"SetInstVar" "$sign_mat2 %SIGN_EXIT_EXTRA%"
				}
			"$timer_delay 8"
				{
				"SetInstVar" "$sign_mat1 %SIGN_BOX_DROPPER_MAIN%"
				"SetInstVar" "$sign_mat2 %SIGN_BOX_DROPPER_EXTRA%"
				}
			"$timer_delay 9"
				{
				"SetInstVar" "$sign_mat1 %SIGN_BALL_DROPPER_MAIN%"
				"SetInstVar" "$sign_mat2 %SIGN_BALL_DROPPER_EXTRA%"
				}
				
			"$timer_delay 10"
				{
				"SetInstVar" "$sign_mat1 %SIGN_LASER_CUBE_MAIN%"
				"SetInstVar" "$sign_mat2 %SIGN_LASER_CUBE_EXTRA%"
				}
			"$timer_delay 11"
				{
				"SetInstVar" "$sign_mat1 %SIGN_GOOP_MAIN%"
				"SetInstVar" "$sign_mat2 %SIGN_GOOP_EXTRA%"
				}
			"$timer_delay 12"
				{
				"SetInstVar" "$sign_mat1 %SIGN_FUNNEL_MAIN%"
				"SetInstVar" "$sign_mat2 %SIGN_FUNNEL_EXTRA%"
				}
			"$timer_delay 13"
				{
				"SetInstVar" "$sign_mat1 %SIGN_POLARITY_MAIN%"
				"SetInstVar" "$sign_mat2 %SIGN_POLARITY_EXTRA%"
				}
			"$timer_delay 14"
				{
				"SetInstVar" "$sign_mat1 %SIGN_LASER_RELAY_MAIN%"
				"SetInstVar" "$sign_mat2 %SIGN_LASER_RELAY_EXTRA%"
				}
			"$timer_delay 15"
				{
				"SetInstVar" "$sign_mat1 %SIGN_TURRET_MAIN%"
				"SetInstVar" "$sign_mat2 %SIGN_TURRET_EXTRA%"
				}
			"$timer_delay 16"
				{
				"SetInstVar" "$sign_mat1 %SIGN_BRIDGE_MAIN%"
				"SetInstVar" "$sign_mat2 %SIGN_BRIDGE_EXTRA%"
				}
			"$timer_delay 17"
				{
				"SetInstVar" "$sign_mat1 %SIGN_GEL_BOUNCE_MAIN%"
				"SetInstVar" "$sign_mat2 %SIGN_GEL_BOUNCE_EXTRA%"
				}
			"$timer_delay 18"
				{
				"SetInstVar" "$sign_mat1 %SIGN_GEL_SPEED_MAIN%"
				"SetInstVar" "$sign_mat2 %SIGN_GEL_SPEED_EXTRA%"
				}
			}
		"Condition"
			{
			// Is the arrow enabled?
			"instvar" "$start_enabled 1"
			"Condition"
				{
				// Allow flipping the orientation of the sign -> inward
				"instvar" "$start_reversed = 1"
				"Condition"
					{
					"Orientation" "Walls"
					"Result"
						{
						// On walls, the signs don't move with reversed.
						"TemplateOverlay"
							{
							"ID" "BEE2_SIGNAGE_CLEAN:right_in"
							"Replace"
								{
								"signage/signage_exit" "%SIGN_ARROW%"
								}
							}
						}	
					"Else"	
						{
						// But on floors, we spin everything around so the arrow always points 'above'
						// the sign.
						"TemplateOverlay"
							{
							"ID" "BEE2_SIGNAGE_CLEAN:left_in"
							"Replace"
								{
								"signage/signage_exit" "%SIGN_ARROW%"
								}
							}
						}
					}
				"Else"
					{
					"TemplateOverlay"
						{
						"ID" "BEE2_SIGNAGE_CLEAN:right_out"
						"Replace"
							{
							"signage/signage_exit" "%SIGN_ARROW%"
							}
						}
					}
				}
			"ElseCondition" // No arrow - check to see if we have a secondary sign
				{           // These are placed in the same spot as the arrow.
				"instvar" "$sign_mat2 != "
				"Condition"
					{
					"Orientation" "walls"
					"Result"
						{
						// We need the offset to ensure it rotates around the correct point.
						"addOverlay"
							{
							"File" "<ITEM_BEE2_SIGNAGE:bee2_sign_wall_pos2>"
							"Offset" "-48 16 0"
							}
						}
					"ElseCondition"
						{
						"instvar" "$start_reversed = 1"
						"Result"
							{
							"TemplateOverlay"
								{
								"ID" "BEE2_SIGNAGE_CLEAN:left_out"
								"Replace"
									{
									"signage/signage_exit" "$sign_mat2"
									}
								}
							}
						"Else"
							{
							"TemplateOverlay"
								{
								"ID" "BEE2_SIGNAGE_CLEAN:right_in"
								"Replace"
									{
									"signage/signage_exit" "$sign_mat2"
									}
								}
							}
						}
					}
				}
			}
		"Condition" // The main sign
			{
			"instvar" "$sign_mat1 != "
			"Condition"
				{
				"Orientation" "walls"
				"Result"
					{
					"addOverlay"
						{
						"File" "<ITEM_BEE2_SIGNAGE:bee2_sign_wall_pos>"
						"Offset" "-48 -16 0"
						}
					}
				"ElseCondition"
					{
					"instvar" "$start_reversed 1"
					"Result"
						{
						"TemplateOverlay"
							{
							"ID" "BEE2_SIGNAGE_CLEAN:right_out"
							"Replace"
								{
								"signage/signage_exit" "$sign_mat1"
								}
							}
						}
					"Else"
						{
						"TemplateOverlay"
							{
							"ID" "BEE2_SIGNAGE_CLEAN:left_in"
							"Replace"
								{
								"signage/signage_exit" "$sign_mat1"
								}
							}
						}
					}
				}
			}
		}
	
	// We use the seperate offset instance to ensure it rotates around the correct position
	// On walls we want it to be upright.
	"Condition"
		{
		"instance" "<ITEM_BEE2_SIGNAGE:bee2_sign_wall_pos>"
		"Result"
			{
			"ForceUpright" ""
			"TemplateOverlay"
				{
				"ID"       "BEE2_SIGNAGE_CLEAN:sign_wall"
				"Normal"   "1 0 0"
				"Face_pos" "-64 0 0"
				"Replace"
					{
					"signage/signage_exit" "$sign_mat1"
					}
				}
			"Changeinstance" ""
			}
		}
	"Condition"
		{
		"instance" "<ITEM_BEE2_SIGNAGE:bee2_sign_wall_pos2>"
		"Result"
			{
			"ForceUpright" ""
			"TemplateOverlay"
				{
				"ID"       "BEE2_SIGNAGE_CLEAN:sign_wall"
				"Normal"   "1 0 0"
				"Face_pos" "-64 0 0"
				"Replace"
					{
					"signage/signage_exit" "$sign_mat2"
					}
				}
			"Changeinstance" ""
			}
		}
	}
